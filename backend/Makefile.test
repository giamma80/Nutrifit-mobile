# Test Makefile for different test levels
# Usage: make -f Makefile.test unit

.PHONY: unit integration e2e all

# Run unit tests (isolated, no app dependencies)
unit:
	PYTEST_UNIT_ONLY=1 uv run pytest tests/unit/ -v --tb=short

# Run integration tests (requires app)
integration:
	uv run pytest tests/integration/ -v --tb=short -m "not e2e"

# Run e2e tests (full system)
e2e:
	uv run pytest tests/e2e/ -v --tb=short

# Run all tests
all:
	uv run pytest tests/ -v --tb=short

# Run tests with coverage
coverage:
	uv run pytest tests/unit/ --cov=domain --cov=application --cov-report=term-missing -v
