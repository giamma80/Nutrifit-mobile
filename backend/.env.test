############################################################
# Nutrifit Backend - Test Environment Variables
# File per configurare i test (unit, integration, e2e)
############################################################
#
# CARICAMENTO AUTOMATICO:
# Questo file viene caricato automaticamente da tests/conftest.py
# quando esegui pytest (tramite python-dotenv).
#
# Uso:
#   ./make.sh test           -> carica .env.test automaticamente
#   make test                -> carica .env.test automaticamente
#   pytest                   -> carica .env.test automaticamente
#   pytest -m integration_real -> esegue solo test con API reali
#
############################################################

###############################
# Integration Tests (P3.7)
###############################
# Questi test chiamano le API reali e vengono skippati se le chiavi mancano.
# Per eseguirli: pytest -m integration_real

# OpenAI API (per test P3.7.1)
# Richiesta per test: infrastructure/ai/openai/client.py
OPENAI_API_KEY=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
OPENAI_VISION_MODEL=gpt-4o-mini

# USDA FoodData Central API (per test P3.7.2)
# Richiesta per test: infrastructure/external_apis/usda/client.py
AI_USDA_API_KEY=zqOnb4hdPJlvU1f9WBmMS8wRgphfPng9ja02KIpy

# OpenFoodFacts (per test P3.7.3)
# Nessuna API key necessaria - API pubblica
# Test: infrastructure/external_apis/openfoodfacts/client.py

###############################
# E2E Tests (P6.1)
###############################
# Gli E2E test usano stub providers (non chiamano API reali)
# Nessuna configurazione necessaria

###############################
# Provider Factory Configuration (P7.0.4)
###############################
# Test environment: use stub providers for fast, deterministic tests
# These settings override any production settings in .env
# Values: "openai" | "usda" | "openfoodfacts" | "stub"

# All tests use stub providers (except integration_real marked tests)
VISION_PROVIDER=stub
NUTRITION_PROVIDER=stub
BARCODE_PROVIDER=stub

###############################
# MongoDB & Redis (P7.1 - Future)
###############################
# Repository Factory Configuration (P7.0.1-3)
# Test environment uses in-memory repository (fast, isolated, no external deps)
MEAL_REPOSITORY=inmemory

# Per test di integrazione MongoDB (opzionale, skip se mancante)
# MONGODB_URI=mongodb://localhost:27017
# MONGODB_DATABASE=nutrifit_test

# Redis (opzionale)
# REDIS_URI=redis://localhost:6379
# REDIS_ENABLED=false

###############################
# Logging per Debug Test
###############################
LOG_LEVEL=INFO  # DEBUG per vedere tutti i dettagli durante i test

###############################
# NOTE
# - I test integration_real vengono skippati automaticamente se le API keys mancano
# - Usa: pytest -m integration_real per eseguire solo i test con API reali
# - Usa: pytest -m "not integration_real" per skippare i test con API reali
# - Gli E2E test usano sempre stub providers (veloci, no costi API)
###############################
