"""
Canonical GraphQL SDL (mirror).
Fonte canonica: backend/graphql/schema.graphql
Questo file deve essere mantenuto IDENTICO (contenuto e ordine) al canonico.

Procedura di aggiornamento:
  1. make -C backend schema-export
  2. make -C backend schema-sync
  3. make -C backend schema-check

Non editare solo questo file.
"""
input LogMealInput {
  name: String!
  quantityG: Float!
  timestamp: String = null
  barcode: String = null
  idempotencyKey: String = null
}

type MealEntry {
  id: String!
  name: String!
  quantityG: Float!
  timestamp: String!
  barcode: String
  idempotencyKey: String
  nutrientSnapshotJson: String
  calories: Int
  protein: Float
  carbs: Float
  fat: Float
  fiber: Float
  sugar: Float
  sodium: Float
}

type Mutation {
  """Log di un pasto con arricchimento nutrienti se barcode noto"""
  logMeal(input: LogMealInput!): MealEntry!
}

type Product {
  barcode: String!
  name: String!
  brand: String
  category: String
  calories: Int
  protein: Float
  carbs: Float
  fat: Float
  fiber: Float
  sugar: Float
  sodium: Float
}

type Query {
  hello: String!
  serverTime: String!
  health: String!

  """Fetch prodotto da OpenFoodFacts (cache)"""
  product(barcode: String!): Product
}